{"version":3,"sources":["state/actions/userToken.tsx","state/actions/profile.tsx","state/actions/manifest.tsx","state/globalContextState.tsx","constants.tsx","api/bungieApi.tsx","hooks/useGlobalState.tsx","util/inventoryUtil.tsx","util/presetUtil.tsx","components/ItemDisplay/ItemDisplay.tsx","components/ErrorBoundary/ErrorBoundary.tsx","App.tsx","components/Pages/LoadoutOptimizerPage/LoadoutOptimizerPage.tsx","components/Auth/Auth.tsx","components/Pages/Homepage/Homepage.tsx","components/Pages/OAuthCallbackPage/OAuthCallbackPage.tsx","hooks/useAppReducer.tsx","serviceWorker.js","index.js"],"names":["setUserAuth","accessToken","expiresIn","membershipId","membershipType","state","name","Date","now","window","localStorage","setItem","JSON","stringify","cachedUserAuth","parse","getItem","setProfile","data","setManifest","contentPath","version","setComponentContent","defaultState","reduce","obj","action","Error","AppStateContext","createContext","API_TOKEN","API_ROOT_PATH","bungieRequestHeaders","userAuth","location","href","Authorization","useGlobalState","useContext","MOD_BASELINE_CONFIG","shouldAddItem","exoticItem","item","itemHash","exotic","content","itemTypeDisplayName","hash","getInventoryContent","profile","contentMap","vaultInventory","profileInventory","items","onCharacterInventories","Object","keys","characterEquipment","map","key","o","i","characterInventories","stats","itemComponents","instanceData","instances","modSlots","sockets","filter","itemInstanceId","equippingBlock","quality","uniqueLabel","classType","powerCap","powercaps","versions","powerCapHash","intellect","value","mobility","strength","discipline","recovery","resilience","mods","appliedMods","length","forEach","prop","some","socket","isEnabled","plugHash","toString","isModEquipped","extraItemData","energy","energyCapacity","stat","applyBaseLineStats","getStatBuild","combo","a","total","isViableStat","presetList","totalFloor","n","width","ItemDisplay","mode","isPvP","indexOf","totalStats","className","css","padEnd","statName","bonus","index","statItems","statString","b","substr","join","displayProperties","ErrorBoundary","hasError","error","info","console","debug","this","setState","props","defaultErrorMessage","style","whiteSpace","wordWrap","message","stack","children","Component","authRoutes","dispatch","useState","isLoading","setIsLoading","setMode","mainClass","setMainClass","setExotic","useEffect","manifest","Promise","all","axios","url","params","components","headers","then","Response","jsonWorldComponentContentPaths","en","DestinyRecordDefinition","DestinyInventoryItemLiteDefinition","DestinyPowerCapDefinition","res","powerCapRes","onModeChange","useCallback","e","target","onMainClassChange","onExotic","inventoryData","useMemo","componentContent","categorizedItems","helmets","gauntlets","chests","legs","push","filterAndCategorize","exotics","uniqBy","combos","preset","presetItem","find","helmet","gauntlet","chest","leg","set","sort","padding","label","options","onChange","toLocaleString","x","Cmp","path","component","to","routes","history","useHistory","query","qs","search","code","method","grant_type","client_id","route","getAuthToken","auth","access_token","expires_in","log","membershipRes","destinyMemberships","exact","App","useReducer","Provider","Boolean","hostname","match","ReactDOM","render","StrictMode","document","getElementById","navigator","serviceWorker","ready","registration","unregister","catch"],"mappings":"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","file":"static/js/main.937b47c3.chunk.js","sourcesContent":["export interface IUserAuth {\n  name : string,\n  accessToken : string,\n  membershipId : string;\n  membershipType : string;\n  expiresIn : number;\n}\n\nexport default function setUserAuth(\n  accessToken = '',\n  expiresIn = 0,\n  membershipId = '',\n  membershipType = ''\n) : IUserAuth {\n  const state = {\n    name: 'userAuth',\n    accessToken: accessToken,\n    membershipId: membershipId,\n    expiresIn: Date.now() + (expiresIn * 1000),\n    membershipType : membershipType\n  };\n\n  if (accessToken) {\n    window.localStorage.setItem('userAuth', JSON.stringify(state));\n  }\n\n  // if no arguments provided, recall cached token\n  if (!accessToken) {\n    const cachedUserAuth = JSON.parse(window.localStorage.getItem('userAuth') || '{}');\n\n    return {\n      ...state,\n      ...cachedUserAuth\n    };\n  }\n\n  return state;\n}\n","export interface IManifest {\n  data : any\n  name : string;\n}\n\nexport function setProfile(data ?: any) : IManifest {\n  return {\n    name: 'profile',\n    ...data\n  };\n}\n","export interface IManifest {\n  contentPath : string;\n  version : string;\n  name : string;\n}\n\nexport function setManifest(data = {contentPath: '', version: ''}) : IManifest {\n  return {\n    name: 'manifest',\n    ...data\n  };\n}\n\nexport function setComponentContent(data : any) {\n  return {\n    name: 'componentContent',\n    ...data\n  }\n}\n","import {createContext} from 'react';\nimport setUserAuth from './actions/userToken';\nimport {setProfile} from './actions/profile';\nimport {setComponentContent, setManifest} from './actions/manifest';\n\nexport type TActionResponse = {name : string, [key : string] : any};\nexport type TAction = (...args : any[]) => TActionResponse;\n\n// register all actions here\nexport const actionList : TAction[] = [\n  setUserAuth,\n  setProfile,\n  setManifest,\n  setComponentContent\n];\n\nexport const defaultState = actionList.reduce((obj, action) => {\n  const {name, ...state} = action();\n\n  // validate key\n  if (!name) {\n    throw new Error('action must return a `type` value');\n  }\n\n  return {\n    ...obj,\n    // invoke default state\n    [name]: state\n  }\n}, {});\n\nexport const AppStateContext = createContext(defaultState);\n","export const API_TOKEN = 'f5a851a085ec464e8c1af199031b6aec';\nexport const API_CLIENT_ID = '3770';\nexport const API_ROOT_PATH = 'https://www.bungie.net/platform';\nexport const AUTH_URL = `https://www.bungie.net/en/OAuth/Authorize?client_id=${API_CLIENT_ID}&response_type=code`;\nexport const CLASS_TYPE_HUNTER = 1;\nexport const CLASS_TYPE_WARLOCK = 2;\nexport const CLASS_TYPE_TITAN = 0;\nexport const STAT_TYPE_INTELLECT = \"144602215\";\nexport const STAT_TYPE_MOBILITY = \"2996146975\";\nexport const STAT_TYPE_STRENGTH = \"4244567218\";\nexport const STAT_TYPE_DISCIPLINE = \"1735777505\";\nexport const STAT_TYPE_RECOVERY = \"1943323491\";\nexport const STAT_TYPE_RESILIENCE = \"392767087\";\n\nexport const MOD_TYPE_MOBILITY = \"3961599962\";\nexport const MOD_TYPE_MOBILITY2 = \"275671171\";\nexport const MOD_TYPE_RECOVERY = \"2645858828\";\nexport const MOD_TYPE_RECOVERY2 = \"126924337\";\nexport const MOD_TYPE_RESILIENCE = \"3790655795\";\nexport const MOD_TYPE_RESILIENCE2 = \"2850583378\";\nexport const MOD_TYPE_STRENGTH = \"3253038666\";\nexport const MOD_TYPE_INTELLECT = \"3355995799\"\nexport const MOD_TYPE_DISCIPLINE = \"4048838440\";\n\nexport const MOD_TYPE_MINOR_RECOVERY = \"555005975\";\nexport const MOD_TYPE_MINOR_MOBILITY = \"204137529\";\nexport const MOD_TYPE_MINOR_RESILIENCE = \"3682186345\";\nexport const MOD_TYPE_MINOR_DISCIPLINE = \"2623485440\";\nexport const MOD_TYPE_MINOR_INTELLECT = \"1227870362\";\nexport const MOD_TYPE_MINOR_STRENGTH = \"3699676109\";\n\nexport const MOD_TYPE_TRACTION = \"1708067044\";\nexport const MOD_TYPE_TRACTION2 = \"1818103563\";\nexport const MOD_TYPE_RADIANT_LIGHT = \"2979815167\";\nexport const MOD_TYPE_POWERFUL_FRIENDS = \"1484685887\";\n\nexport const MOD_TYPE_STACK_ON_STACKS = \"3523075123\";\nexport const MOD_TYPE_PRECISELY_CHARGED = \"2263321584\";\nexport const MOD_TYPE_CHARGE_HARVESTER = \"2263321587\";\nexport const MOD_TYPE_PROTECTIVE_LIGHT = \"3523075120\";\nexport const MOD_TYPE_EXTRA_RESERVES = \"3523075121\";\nexport const MOD_TYPE_SURPRISE_ATTACK = \"2263321585\";\n","import axios from 'axios';\nimport qs from 'query-string';\nimport {API_CLIENT_ID, API_ROOT_PATH, API_TOKEN, AUTH_URL} from '../constants';\nimport {IUserAuth} from '../state/actions/userToken';\n\nexport function httpBungie(route : string) {\n  return API_ROOT_PATH + route;\n}\n\nexport function bungieRequestHeaders(userAuth ?: IUserAuth) {\n  if (userAuth) {\n    const isTokenStale = userAuth.accessToken ? (Date.now() > userAuth.expiresIn) : true;\n\n    // immediately redirect if the token is stale\n    if (isTokenStale) {\n      window.location.href = '/d2io';\n    }\n\n    return {\n      'x-api-key': API_TOKEN,\n      Authorization: `Bearer ${userAuth.accessToken}`\n    };\n  }\n\n  return {\n    'x-api-key': API_TOKEN\n  };\n}\n\nexport function getAuthToken(code : string) {\n  return axios({\n    method: 'POST',\n    headers: {\n      ...bungieRequestHeaders(),\n      'content-type': 'application/x-www-form-urlencoded'\n    },\n    data: qs.stringify({\n      code,\n      grant_type: 'authorization_code',\n      client_id: API_CLIENT_ID\n    }),\n    url: httpBungie('/app/oauth/token/')\n  });\n}\n\nexport function getMembershipsForCurrentUser(userAuth : IUserAuth) {\n  return axios({\n    url: `${API_ROOT_PATH}/User/GetMembershipsForCurrentUser/`,\n    headers: bungieRequestHeaders(userAuth)\n  });\n}\n\nexport function getProfile(userAuth : IUserAuth) {\n  return axios({\n    url: `https://www.bungie.net/Platform/Destiny2/${userAuth.membershipType}/Profile/${userAuth.membershipId}/`,\n    params: {\n      components: '100,102,103,200,201,202,205,300,301,304,305,306,307,800,308,310,309,900,1100'\n    },\n    headers: bungieRequestHeaders(userAuth)\n  });\n}\n\nexport function getManifest() {\n  return axios({\n    url: `${API_ROOT_PATH}/Destiny2/Manifest/`,\n    headers: bungieRequestHeaders()\n  });\n}\n\n","import {useContext} from 'react';\nimport {AppStateContext} from '../state/globalContextState';\n\nexport function useGlobalState() {\n  return useContext(AppStateContext) as any;\n}\n","import {\n  MOD_TYPE_CHARGE_HARVESTER,\n  MOD_TYPE_DISCIPLINE,\n  MOD_TYPE_EXTRA_RESERVES,\n  MOD_TYPE_INTELLECT,\n  MOD_TYPE_MINOR_DISCIPLINE, MOD_TYPE_MINOR_INTELLECT,\n  MOD_TYPE_MINOR_MOBILITY,\n  MOD_TYPE_MINOR_RECOVERY,\n  MOD_TYPE_MINOR_RESILIENCE, MOD_TYPE_MINOR_STRENGTH,\n  MOD_TYPE_MOBILITY,\n  MOD_TYPE_MOBILITY2,\n  MOD_TYPE_POWERFUL_FRIENDS,\n  MOD_TYPE_PRECISELY_CHARGED,\n  MOD_TYPE_PROTECTIVE_LIGHT,\n  MOD_TYPE_RADIANT_LIGHT,\n  MOD_TYPE_RECOVERY,\n  MOD_TYPE_RECOVERY2,\n  MOD_TYPE_RESILIENCE,\n  MOD_TYPE_RESILIENCE2,\n  MOD_TYPE_STACK_ON_STACKS,\n  MOD_TYPE_STRENGTH,\n  MOD_TYPE_SURPRISE_ATTACK,\n  MOD_TYPE_TRACTION,\n  MOD_TYPE_TRACTION2,\n  STAT_TYPE_DISCIPLINE,\n  STAT_TYPE_INTELLECT,\n  STAT_TYPE_MOBILITY,\n  STAT_TYPE_RECOVERY,\n  STAT_TYPE_RESILIENCE,\n  STAT_TYPE_STRENGTH\n} from '../constants';\n\nexport interface Item {\n\n}\n\nexport const MOD_BASELINE_CONFIG = [\n  [MOD_TYPE_MINOR_MOBILITY, 'mobility', -5],\n  [MOD_TYPE_MINOR_RESILIENCE, 'resilience', -5],\n  [MOD_TYPE_MINOR_RECOVERY, 'recovery', -5],\n  [MOD_TYPE_MINOR_DISCIPLINE, 'discipline', -5],\n  [MOD_TYPE_MINOR_INTELLECT, 'intellect', -5],\n  [MOD_TYPE_MINOR_STRENGTH, 'strength', -5],\n  [MOD_TYPE_MOBILITY, 'mobility', -10],\n  [MOD_TYPE_MOBILITY2, 'mobility', -10],\n  [MOD_TYPE_RECOVERY, 'recovery', -10],\n  [MOD_TYPE_RECOVERY2, 'recovery', -10],\n  [MOD_TYPE_RESILIENCE, 'resilience', -10],\n  [MOD_TYPE_RESILIENCE2, 'resilience', -10],\n  [MOD_TYPE_STRENGTH, 'strength', -10],\n  [MOD_TYPE_INTELLECT, 'intellect', -10],\n  [MOD_TYPE_DISCIPLINE, 'discipline', -10],\n  [MOD_TYPE_RADIANT_LIGHT, 'strength', -20],\n  [MOD_TYPE_POWERFUL_FRIENDS, 'mobility', -20],\n  [MOD_TYPE_STACK_ON_STACKS, 'recovery', 10],\n  [MOD_TYPE_PRECISELY_CHARGED, 'discipline', 10],\n  [MOD_TYPE_PROTECTIVE_LIGHT, 'strength', 10],\n  [MOD_TYPE_EXTRA_RESERVES, 'intellect', 10],\n  [MOD_TYPE_SURPRISE_ATTACK, 'intellect', 10],\n  // @TODO it's dependent on the class :/\n  // [MOD_TYPE_CHARGE_HARVESTER, '']\n]\n\nexport function isModEquipped(hash : any, sockets : any) {\n  return sockets.some((socket : any) => socket.isEnabled && socket.plugHash.toString() === hash.toString());\n}\n\nexport function applyBaseLineStats(item : any, mods : any, instanceData : any) {\n  const appliedMods = mods[item.itemInstanceId];\n\n  // do nothing if there's no mods to work wit\n  if (!appliedMods || appliedMods.sockets.length === 0) {\n    return item;\n  }\n\n  MOD_BASELINE_CONFIG.forEach(([hash, prop, value]) => {\n    if (isModEquipped(hash, appliedMods.sockets)) {\n      item[prop] += value;\n    }\n  });\n\n  // check for master worked items\n  const extraItemData = instanceData[item.itemInstanceId];\n  if (extraItemData && extraItemData.energy && extraItemData.energy.energyCapacity === 10) {\n    [\n      'mobility',\n      'recovery',\n      'resilience',\n      'strength',\n      'intellect',\n      'discipline'\n    ].forEach((stat) => {\n      item[stat] -= 2;\n    });\n  }\n\n  return item;\n}\n\nfunction shouldAddItem(exoticItem : any, item : any) {\n  // must be an exotic and a constant must be set (no constant leads to multi-exotic load outs)\n  // if a constant exists, non exotics of this type must be omitted\n  if (exoticItem.itemHash && item.exotic) {\n    if (item.itemHash === exoticItem.itemHash) {\n      return true;\n    }\n\n    return false;\n  }\n\n  // filter anything that is taking up the same exotic slot\n  if (exoticItem.itemHash && !item.exotic && exoticItem.content.itemTypeDisplayName === item.content.itemTypeDisplayName) {\n    return false;\n  }\n\n  // if no hash is defined, exclude exotics from the pool\n  if (!exoticItem.hash && item.exotic) {\n    return false;\n  }\n\n  return true;\n}\n\nexport function filterAndCategorize({powerCap, exoticItem, items, mainClass} : any) {\n  const helmets : any = [];\n  const gauntlets : any = [];\n  const chests : any = [];\n  const legs : any = [];\n\n  if (items.length === 0) {\n    return {helmets, gauntlets, chests, legs};\n  }\n\n  if (mainClass === '') {\n    return {helmets, gauntlets, chests, legs};\n  }\n\n  items\n    // filter by powercap\n    .filter((item : any) => item.powerCap >= powerCap)\n    // filter by class\n    .filter((item : any) => item.classType.toString() === mainClass.toString())\n    // map each item\n    .forEach((item : any) => {\n      switch (item.content.itemTypeDisplayName) {\n        case 'Helmet':\n          // eslint-disable-next-line @typescript-eslint/no-unused-expressions\n          shouldAddItem(exoticItem, item) ? helmets.push(item) : null;\n          break;\n        case 'Gauntlets':\n          // eslint-disable-next-line @typescript-eslint/no-unused-expressions\n          shouldAddItem(exoticItem, item) ? gauntlets.push(item) : null;\n          break;\n        case 'Chest Armor':\n          // eslint-disable-next-line @typescript-eslint/no-unused-expressions\n          shouldAddItem(exoticItem, item) ? chests.push(item) : null;\n          break;\n        case 'Leg Armor':\n          // eslint-disable-next-line @typescript-eslint/no-unused-expressions\n          shouldAddItem(exoticItem, item) ? legs.push(item) : null;\n          break;\n      }\n    });\n\n  return {helmets, gauntlets, chests, legs};\n}\n\nexport function getInventoryContent(profile : any, contentMap : any) {\n  const vaultInventory = profile.profileInventory.data.items;\n\n  const onCharacterInventories : any = Object.keys(profile.characterEquipment.data)\n    .map(key => profile.characterEquipment.data[key].items)\n    .reduce((o, i) => ([...o, ...i]), []);\n\n  const characterInventories : any = Object.keys(profile.characterInventories.data)\n    .map(key => profile.characterInventories.data[key].items)\n    .reduce((o, i) => ([...o, ...i]), []);\n\n  const stats = profile.itemComponents.stats.data;\n  const instanceData = profile.itemComponents.instances.data;\n  const modSlots = profile.itemComponents.sockets.data;\n\n  const items = [\n    ...vaultInventory,\n    ...characterInventories,\n    ...onCharacterInventories\n  ];\n\n  return items\n    .filter(item => (\n      item.itemInstanceId\n      && contentMap[item.itemHash].equippingBlock\n      && contentMap[item.itemHash].quality\n      && stats[item.itemInstanceId]\n      && stats[item.itemInstanceId].stats\n      // must have an armor stat\n      && stats[item.itemInstanceId].stats[STAT_TYPE_INTELLECT]\n    ))\n    .map(item => ({\n      ...item,\n      content: contentMap[item.itemHash],\n      exotic: contentMap[item.itemHash].equippingBlock.uniqueLabel === 'exotic_armor',\n      classType: contentMap[item.itemHash].classType,\n      powerCap: contentMap.powercaps[contentMap[item.itemHash].quality.versions[0].powerCapHash].powerCap,\n      intellect: stats[item.itemInstanceId].stats[STAT_TYPE_INTELLECT].value,\n      mobility: stats[item.itemInstanceId].stats[STAT_TYPE_MOBILITY].value,\n      strength: stats[item.itemInstanceId].stats[STAT_TYPE_STRENGTH].value,\n      discipline: stats[item.itemInstanceId].stats[STAT_TYPE_DISCIPLINE].value,\n      recovery: stats[item.itemInstanceId].stats[STAT_TYPE_RECOVERY].value,\n      resilience: stats[item.itemInstanceId].stats[STAT_TYPE_RESILIENCE].value\n    }))\n    .map(item => applyBaseLineStats(item, modSlots, instanceData))\n}\n","export function getStatBuild(items : any[]) {\n  const combo = items;\n  const mobility = combo.reduce((o, a) => o + a.mobility, 0);\n  const resilience = combo.reduce((o, a) => o + a.resilience, 0);\n  const recovery = combo.reduce((o, a) => o + a.recovery, 0);\n  const discipline = combo.reduce((o, a) => o + a.discipline, 0);\n  const intellect = combo.reduce((o, a) => o + a.intellect, 0);\n  const strength = combo.reduce((o, a) => o + a.strength, 0);\n  const total = mobility + resilience + recovery + discipline + intellect + strength;\n\n  return {\n    mobility,\n    resilience,\n    recovery,\n    discipline,\n    intellect,\n    strength,\n    total\n  };\n}\n\nexport function isViableStat(value : number) {\n  return (value % 10 >= 5 && value % 10 <= 7) || value % 10 <= 3\n}\n\nexport function presetPvPStandard(items : any[], totalFloor = 220) {\n  const {\n    mobility,\n    recovery,\n    discipline,\n    intellect,\n    strength,\n    total\n  } = getStatBuild(items);\n\n  return (\n    mobility <= 59\n    && recovery >= 60\n    // traction\n    && (mobility % 10) <= 4\n    // must all be moderate levels of stats\n    && [\n      (recovery % 10) <= 4,\n      (intellect % 10) <= 4,\n      (discipline % 10) <= 4,\n      (strength % 10) <= 4\n    ].filter(n => n).length >= 4\n\n    && total >= totalFloor\n  );\n}\n\nexport function presetPvPStandardResilience(items : any[], totalFloor = 220) {\n  const {\n    mobility,\n    recovery,\n    discipline,\n    intellect,\n    strength,\n    total,\n    resilience\n  } = getStatBuild(items);\n\n  return (\n    mobility <= 59\n    && recovery >= 60\n    // traction\n    && (mobility % 10) <= 4\n    // must all be moderate levels of stats\n    && [\n      (recovery % 10) <= 2,\n      (intellect % 10) <= 2,\n      (discipline % 10) <= 2,\n      (strength % 10) <= 2\n    ].filter(n => n).length >= 3\n    && resilience <= 20\n    && total >= totalFloor\n  );\n}\n\nexport function presetPvPPerfect(items : any[], totalFloor = 220) {\n  const {\n    mobility,\n    recovery,\n    discipline,\n    intellect,\n    strength,\n    resilience\n  } = getStatBuild(items);\n\n  return (\n    recovery >= 60\n    && resilience <= 30\n    // must all be moderate levels of stats\n    && [\n      isViableStat(mobility),\n      isViableStat(resilience),\n      isViableStat(recovery),\n      isViableStat(intellect),\n      isViableStat(discipline),\n      isViableStat(strength)\n    ].filter(n => n).length >= 5\n  );\n}\n\nexport function presetPvPPerfectLowResilience(items : any[], totalFloor = 220) {\n  const {\n    mobility,\n    recovery,\n    discipline,\n    intellect,\n    strength,\n    resilience\n  } = getStatBuild(items);\n\n  return (\n    recovery >= 80\n    && mobility >= 40\n    && resilience >= 10\n    && resilience <= 14\n    // must all be moderate levels of stats\n    && [\n      isViableStat(mobility),\n      isViableStat(recovery),\n      isViableStat(discipline),\n      isViableStat(strength),\n      (intellect % 10) <= 4,\n    ].filter(n => n).length >= 5\n  );\n}\n\nexport function presetPvEStandard(items : any[], totalFloor = 220) {\n  const {\n    mobility,\n    recovery,\n    discipline,\n    intellect,\n    strength,\n    total\n  } = getStatBuild(items);\n\n  return (\n    (recovery >= 60)\n    && (discipline >= 50)\n    && [\n      (mobility % 10) <= 4,\n      (recovery % 10) <= 4,\n      (intellect % 10) <= 4,\n      (discipline % 10) <= 4,\n      (strength % 10) <= 4\n    ].filter(n => n).length >= 5\n\n    && total >= totalFloor\n  );\n}\n\nexport function presetPvEPerfect(items : any[], totalFloor = 220) {\n  const {\n    mobility,\n    recovery,\n    discipline,\n    intellect,\n    strength,\n    resilience\n  } = getStatBuild(items);\n\n  return (\n    (recovery >= 60)\n    && (discipline >= 50)\n    && [\n      (mobility % 10) <= 2,\n      (recovery % 10) <= 2,\n      (intellect % 10) <= 2,\n      (discipline % 10) <= 2,\n      (strength % 10) <= 2,\n      (resilience % 10) <= 2\n    ].filter(n => n).length >= 6\n  );\n}\n\n\nexport function presetPvPLowResilience(items : any[], totalFloor = 220) {\n  const {\n    resilience\n  } = getStatBuild(items);\n\n  return (\n    resilience < 20\n  );\n}\n\nexport function presetPvPSuperLowResilience(items : any[], totalFloor = 220) {\n  const {\n    resilience,\n    mobility,\n    recovery\n  } = getStatBuild(items);\n\n  return (\n    (mobility + recovery) >= 125\n  );\n}\n\nexport function presetPvPMinGear(items : any[], totalFloor = 220) {\n  const {\n    mobility,\n    recovery\n  } = getStatBuild(items);\n\n  return (\n    mobility >= 30\n    && recovery >= 40\n  );\n}\n\nexport function presetPvPLowGear(items : any[], totalFloor = 220) {\n  const {\n    mobility,\n    recovery,\n    discipline,\n    intellect,\n    strength,\n    resilience\n  } = getStatBuild(items);\n\n  return (\n    mobility <= 59\n    // traction\n    && (mobility % 10) <= 4\n    && resilience <= 30\n    // must all be moderate levels of stats\n    && [\n      (recovery % 10) <= 4,\n      (intellect % 10) <= 4,\n      (discipline % 10) <= 4,\n      (strength % 10) <= 4\n    ].filter(n => n).length >= 4\n  );\n}\n\nexport function presetPvPUnchi1(items : any[], totalFloor = 220) {\n  const {\n    mobility,\n    recovery,\n    discipline,\n    intellect,\n    strength,\n    resilience\n  } = getStatBuild(items);\n\n  return (\n    mobility <= 59\n    && ((mobility + recovery)) >= ((59 + 100) - 50)\n    // traction\n    && (mobility % 10) <= 4\n    && resilience >= 10\n    && resilience <= 12\n    && (recovery % 10) <= 4\n  );\n}\n\nexport function presetPvPUnchiWarlock(items : any[], totalFloor = 220) {\n  const {\n    mobility,\n    recovery,\n    discipline,\n    intellect,\n    strength,\n    resilience\n  } = getStatBuild(items);\n\n  return (\n    mobility <= 19\n    && ((mobility + recovery)) >= ((19 + 100) - 50)\n    // traction\n    && (mobility % 10) <= 4\n    && resilience >= 10\n    && resilience <= 22\n    && (recovery % 10) <= 4\n    && (intellect % 10) <= 4\n    && intellect >= 60\n  );\n}\n\nexport function presetPvPUnchiTitan(items : any[], totalFloor = 220) {\n  const {\n    mobility,\n    recovery,\n    discipline,\n    intellect,\n    strength,\n    resilience\n  } = getStatBuild(items);\n\n  return (\n    (resilience + recovery) >= 100\n  );\n}\n\nexport function presetPvPMinWarlock(items : any[], totalFloor = 220) {\n  const {\n    mobility,\n    recovery,\n    // discipline,\n    // intellect,\n    // strength,\n    // resilience\n  } = getStatBuild(items);\n\n  return (\n    mobility <= 39\n    // traction\n    && (mobility % 10) <= 4\n    && recovery >= 50\n    // && strength >= 50\n    // && discipline >= 50\n    // && [\n    //   (recovery % 10) <= 4,\n    //   (discipline % 10) <= 4,\n    //   (strength % 10) <= 4\n    // ].filter(n => n).length >= 1\n  );\n}\n\nexport function presetPvPWarlock(items : any[], totalFloor = 220) {\n  const {\n    mobility,\n    recovery,\n    discipline,\n    strength,\n    resilience\n  } = getStatBuild(items);\n\n  return (\n    mobility <= 39\n    && (mobility % 10) <= 4\n    && recovery >= 50\n    && resilience <= 24\n    && [\n      (recovery % 10) <= 4,\n      (discipline % 10) <= 4,\n      (strength % 10) <= 4\n    ].filter(n => n).length >= 2\n  );\n}\n\nexport function presetPvEAbilitySpamHunter(items : any[], totalFloor = 220) {\n  const {\n    mobility,\n    recovery,\n    resilience\n  } = getStatBuild(items);\n\n  return (\n    mobility >= 50\n    && recovery >= 50\n    && resilience <= 30\n  );\n}\n\nexport function presetPvEAbilitySpamWarlock(items : any[], totalFloor = 220) {\n  const {\n    mobility,\n    recovery,\n    resilience\n  } = getStatBuild(items);\n\n  return (\n    mobility <= 30\n    && recovery >= 50\n    && resilience <= 30\n  );\n}\n\nexport function presetPvEAbilitySpamTitan(items : any[], totalFloor = 220) {\n  const {\n    mobility,\n    recovery,\n    resilience,\n    discipline,\n    intellect\n  } = getStatBuild(items);\n\n  return (\n    mobility <= 30\n    && recovery >= 50\n    && resilience >= 50\n    && [\n      (mobility % 10) <= 4,\n      (recovery % 10) <= 4,\n      (intellect % 10) <= 4,\n      (resilience % 10) <= 4,\n      (discipline % 10) <= 4\n    ].filter(n => n).length >= 3\n  );\n}\n\nexport function presetPvEAbilitySpamHunterStandard(items : any[], totalFloor = 220) {\n  const {\n    mobility,\n    recovery,\n    resilience,\n    discipline,\n    intellect\n  } = getStatBuild(items);\n\n  return (\n    mobility >= 50\n    && recovery >= 50\n    && resilience <= 30\n    && [\n      (mobility % 10) <= 4,\n      (recovery % 10) <= 4,\n      (intellect % 10) <= 4,\n      (resilience % 10) <= 4,\n      (discipline % 10) <= 4\n    ].filter(n => n).length >= 3\n  );\n}\n\nexport function presetPvEAbilitySpamWarlockStandard(items : any[], totalFloor = 220) {\n  const {\n    mobility,\n    recovery,\n    resilience,\n    discipline,\n    intellect\n  } = getStatBuild(items);\n\n  return (\n    mobility <= 30\n    && recovery >= 50\n    && resilience <= 30\n    && [\n      (mobility % 10) <= 4,\n      (recovery % 10) <= 4,\n      (intellect % 10) <= 4,\n      (resilience % 10) <= 4,\n      (discipline % 10) <= 4\n    ].filter(n => n).length >= 3\n  );\n}\n\nexport function presetPvEAbilitySpamTitanStandard(items : any[], totalFloor = 220) {\n  const {\n    mobility,\n    recovery,\n    resilience,\n    discipline,\n    intellect\n  } = getStatBuild(items);\n\n  return (\n    mobility <= 30\n    && recovery >= 50\n    && resilience >= 50\n    && [\n      (mobility % 10) <= 4,\n      (recovery % 10) <= 4,\n      (intellect % 10) <= 4,\n      (resilience % 10) <= 4,\n      (discipline % 10) <= 4\n    ].filter(n => n).length >= 3\n  );\n}\n\nexport function presetPvEAbilitySpamHunterStandardLittleWaste(items : any[], totalFloor = 220) {\n  const {\n    mobility,\n    recovery,\n    resilience,\n    intellect\n  } = getStatBuild(items);\n\n  return (\n    mobility >= 50\n    && recovery >= 50\n    && resilience <= 30\n    && [\n      isViableStat(mobility),\n      isViableStat(recovery),\n      isViableStat(intellect),\n      isViableStat(resilience)\n    ].filter(n => n).length >= 4\n  );\n}\n\nexport function presetPvEAbilitySpamWarlockStandardLittleWaste(items : any[], totalFloor = 220) {\n  const {\n    mobility,\n    recovery,\n    resilience,\n    discipline,\n    intellect\n  } = getStatBuild(items);\n\n  return (\n    mobility <= 30\n    && recovery >= 50\n    && resilience <= 30\n    && [\n      (mobility % 10) <= 4,\n      (recovery % 10) <= 4,\n      (intellect % 10) <= 4,\n      (resilience % 10) <= 4,\n      (discipline % 10) <= 4\n    ].filter(n => n).length >= 5\n  );\n}\n\nexport function presetPvEAbilitySpamTitanStandardLittleWaste(items : any[], totalFloor = 220) {\n  const {\n    mobility,\n    recovery,\n    resilience,\n    discipline,\n    intellect\n  } = getStatBuild(items);\n\n  return (\n    mobility <= 30\n    && recovery >= 50\n    && resilience >= 50\n    && [\n      (mobility % 10) <= 4,\n      (recovery % 10) <= 4,\n      (intellect % 10) <= 4,\n      (resilience % 10) <= 4,\n      (discipline % 10) <= 4\n    ].filter(n => n).length >= 5\n  );\n}\n\nexport const presetList = [\n  ['No Optimization', () => true],\n  ['PvP - Standard', presetPvPStandard],\n  ['PvP - Standard (Low Resilience)', presetPvPStandardResilience],\n  ['PvP - Perfect', presetPvPPerfect],\n  ['PvE - Standard', presetPvEStandard],\n  ['PvE - Perfect', presetPvEPerfect],\n  ['PvP - Top Stats (Low Resilience)', presetPvPLowResilience],\n  ['PvP - Low Gear (Low Resilience)', presetPvPLowGear],\n  ['PvP - Top Stats (Super Low Resilience)', presetPvPSuperLowResilience],\n  ['PvP - Minimum Gear', presetPvPMinGear],\n  ['PvP - Perfect (Low Resilience)', presetPvPPerfectLowResilience],\n  ['PvP - Unchi Hunter', presetPvPUnchi1],\n  ['PvP - Unchi Warlock',presetPvPUnchiWarlock ],\n  ['PvP - Unchi Titan 6',presetPvPUnchiTitan],\n  ['PvP - Warlock Trash Gear', presetPvPMinWarlock],\n  ['PvP - Warlock Minimum Gear', presetPvPWarlock],\n  ['PvE - Hunter - Minimum - Ability Spam', presetPvEAbilitySpamHunter],\n  ['PvE - Hunter - Average - Ability Spam', presetPvEAbilitySpamHunterStandard],\n  ['PvE - Hunter - Above Average - Ability Spam', presetPvEAbilitySpamHunterStandardLittleWaste],\n  ['PvE - Warlock - Minimum - Ability Spam', presetPvEAbilitySpamWarlock],\n  ['PvE - Warlock - Average - Ability Spam', presetPvEAbilitySpamWarlockStandard],\n  ['PvE - Warlock - Above Average - Ability Spam', presetPvEAbilitySpamWarlockStandardLittleWaste],\n  ['PvE - Titan - Minimum - Ability Spam', presetPvEAbilitySpamTitan],\n  ['PvE - Titan - Average - Ability Spam', presetPvEAbilitySpamTitanStandard],\n  ['PvE - Titan - Above Average - Ability Spam', presetPvEAbilitySpamTitanStandardLittleWaste],\n];\n","import React from 'react';\nimport {css} from 'react-emotion';\nimport {getStatBuild} from '../../util/presetUtil';\n\nconst divider = '---------------------------------------------------';\nconst width = divider.length;\n\nexport default function ItemDisplay({items, stats, mode} : any) {\n  const {\n    mobility,\n    recovery,\n    discipline,\n    intellect,\n    strength,\n    resilience,\n    total\n  } = stats;\n\n  const isPvP = mode.indexOf('PvP') >= 0;\n\n  const totalStats = [\n    ['Mobility', mobility, isPvP ? 30 : 10],\n    ['Resilience', resilience, 10],\n    ['Recovery', recovery, 10],\n    ['Discipline', discipline, 10],\n    ['Intellect', intellect, 10],\n    ['Strength', strength, isPvP ? 30 : 10],\n  ];\n\n\n  return (\n    <pre\n      className={css`\n        font-family: monospace;\n        color: #fff;\n        background: #000;\n        width: 500px;\n        padding: 10px;\n      `}\n    >\n\n      {`| ${'Stat Total'.padEnd(13, '.')}${total} (max: 280)`.padEnd(width - 1) + '|'}\n      <br />\n      {totalStats.map(([statName, stat, bonus]) => (\n        <div key={statName}>\n          {`| ${statName.padEnd(13, '.')}${stat} (${stat+bonus})`.padEnd(width - 1) + '|'}\n        </div>\n      ))}\n      {`| `.padEnd(width - 1) + '|'}\n      <br />\n      {items.map((item : any, index : any) => {\n        const statItems = [\n          ['Mobility', item.mobility],\n          ['Resilience', item.resilience],\n          ['Recovery', item.recovery],\n          ['Discipline', item.discipline],\n          ['Intellect', item.intellect],\n          ['Strength', item.strength],\n        ];\n\n        const total = statItems.reduce((o : any, a : any) => o + a[1], 0);\n        const statString = statItems.map(([a, b] : any) => `${a.substr(0, 3)} ${b}`).join('  ');\n\n        return (\n          <div key={index}>\n            {`| [${item.content.itemTypeDisplayName}] ${item.content.displayProperties.name} (${total})`.padEnd(width - 1) + '|'}\n            <br />\n            {`| ${statString}`.padEnd(width - 1) + '|'}\n          </div>\n        );\n      })}\n    </pre>\n  )\n}\n","import React, {Component, ErrorInfo, ReactNode} from 'react';\n\nexport interface IErrorBoundaryProps {\n  children : ReactNode;\n  defaultErrorMessage ?: string;\n}\n\nexport default class ErrorBoundary extends Component<IErrorBoundaryProps> {\n  state = {\n    hasError: false,\n    error: new Error('')\n  };\n\n  static getDerivedStateFromError(error : Error) {\n    // Update state so the next render will show the fallback UI.\n    return {hasError: true};\n  }\n\n  componentDidCatch(error : Error, info : ErrorInfo) {\n    // eslint-disable-next-line no-console\n    console.debug('caught error within ErrorBoundary');\n    // eslint-disable-next-line no-console\n    console.error(error, info);\n    this.setState({error});\n    // @TODO add client side error logging here\n  }\n\n  render() {\n    return !this.state.hasError ? (\n      this.props.children\n    ) : (\n      <div>\n        {this.props.defaultErrorMessage || 'An error has occurred on this page.'}\n        <pre style={{whiteSpace: 'pre-wrap', wordWrap: 'break-word'}}>\n          {this.state.error.message}\n          {'\\n'}\n          {this.state.error.stack}\n        </pre>\n      </div>\n    );\n  }\n}\n","import React, {ComponentType, ReactNode} from 'react';\nimport '@blueprintjs/icons/lib/css/blueprint-icons.css';\nimport '@blueprintjs/core/lib/css/blueprint.css';\nimport {AppStateContext, defaultState} from './state/globalContextState';\nimport {\n  BrowserRouter as Router,\n  Switch,\n  Route,\n} from \"react-router-dom\";\nimport Homepage from './components/Pages/Homepage/Homepage';\nimport OAuthCallbackPage from './components/Pages/OAuthCallbackPage/OAuthCallbackPage';\nimport LoadoutOptimizerPage from './components/Pages/LoadoutOptimizerPage/LoadoutOptimizerPage';\nimport {withAuth} from './components/Auth/Auth';\nimport {useAppReducer} from './hooks/useAppReducer';\nimport ErrorBoundary from './components/ErrorBoundary/ErrorBoundary';\n\nexport type TRouteItem = [string, ComponentType];\n\nexport const authRoutes : TRouteItem[] = [\n  ['/d2io/optimizer', LoadoutOptimizerPage]\n].map(([path, component]) => ([\n  path as string,\n  withAuth(component) as ComponentType\n]));\n\nexport const routes : ReactNode[] = [\n  ['/d2io', Homepage],\n  ['/d2io/auth', OAuthCallbackPage],\n  ...authRoutes\n].map(([path, component] : any) => (\n  <Route\n    key={path}\n    component={component}\n    path={path}\n    exact\n  />\n));\n\nfunction App() {\n  const [state, dispatch] = useAppReducer();\n\n  return (\n    <AppStateContext.Provider value={{state: JSON.parse(JSON.stringify(state)), dispatch}}>\n      <ErrorBoundary>\n        <Router>\n          <Switch>\n            {routes}\n          </Switch>\n        </Router>\n      </ErrorBoundary>\n    </AppStateContext.Provider>\n  );\n}\n\nexport default App;\n","import React, {useCallback, useEffect, useMemo, useState} from 'react';\nimport {css} from 'react-emotion';\nimport uniqBy from 'lodash/uniqBy';\nimport {useGlobalState} from '../../../hooks/useGlobalState';\nimport {getManifest, getProfile} from '../../../api/bungieApi';\nimport {setComponentContent, setManifest} from '../../../state/actions/manifest';\nimport {setProfile} from '../../../state/actions/profile';\nimport axios from 'axios';\nimport {FormGroup, HTMLSelect, Spinner} from '@blueprintjs/core';\nimport {CLASS_TYPE_HUNTER, CLASS_TYPE_TITAN, CLASS_TYPE_WARLOCK} from '../../../constants';\nimport {filterAndCategorize, getInventoryContent} from '../../../util/inventoryUtil';\nimport {\n  getStatBuild, presetList\n} from '../../../util/presetUtil';\nimport ItemDisplay from '../../ItemDisplay/ItemDisplay';\n\nexport default function LoadoutOptimizerPage() {\n  const {state, dispatch} = useGlobalState();\n  const [isLoading, setIsLoading] = useState(true);\n  const [mode, setMode] = useState('No Optimization');\n  const [mainClass, setMainClass] = useState('');\n  const [exotic, setExotic] = useState('');\n\n  // // get data\n  useEffect(() => {\n    // setIsLoading(false);\n    // return;\n\n    // if there's a version, do nothings\n    if (state.manifest.version) {\n      setIsLoading(false);\n      return;\n    }\n\n    Promise.all([\n      getProfile(state.userAuth),\n      getManifest()\n    ])\n      .then(([profile, manifest]) => {\n        dispatch(setManifest({\n          contentPath: manifest.data.Response.jsonWorldComponentContentPaths.en.DestinyRecordDefinition,\n          version: manifest.data.Response.version\n        }));\n\n        dispatch(setProfile({\n          data: profile.data.Response\n        }));\n\n        return Promise.all([\n          axios({\n            url: `https://www.bungie.net${manifest.data.Response.jsonWorldComponentContentPaths.en.DestinyInventoryItemLiteDefinition}`\n          }),\n          axios({\n            url: `https://www.bungie.net${manifest.data.Response.jsonWorldComponentContentPaths.en.DestinyPowerCapDefinition}`\n          })\n        ]);\n      })\n      .then(([res, powerCapRes]) => {\n        dispatch(setComponentContent({\n          ...res.data,\n          powercaps: powerCapRes.data\n        }))\n        setIsLoading(false);\n      });\n  }, [state.userAuth, state.manifest, setIsLoading]);\n\n  const onModeChange = useCallback((e) => setMode(e.target.value), []);\n  const onMainClassChange = useCallback((e) => {\n    setMainClass(e.target.value);\n    setExotic('')\n  }, []);\n  const onExotic = useCallback((e) => setExotic(e.target.value), []);\n\n  const inventoryData = useMemo(() => {\n    if (\n      !state.profile.data\n      || !state.profile.data.profileInventory\n      || Object.keys(state.componentContent).length === 0\n    ) {\n      return [];\n    }\n\n    return getInventoryContent(\n      state.profile.data,\n      state.componentContent\n    )\n  }, [state.profile, state.componentContent]);\n\n  const categorizedItems = filterAndCategorize({\n    powerCap: 1260,\n    exoticItem: inventoryData.filter(i => i.itemHash.toString() === exotic.toString())[0] || {},\n    items: inventoryData,\n    mainClass\n  })\n\n  const exotics = uniqBy(\n    inventoryData.filter(i => i.exotic && i.classType.toString() === mainClass.toString()),\n    item => item.itemHash\n  );\n\n  const {helmets, gauntlets, chests, legs} = categorizedItems;\n\n  const combos : any[] = useMemo(() => {\n    const items : any = [];\n    let preset : any;\n\n    const presetItem = presetList.find(([name]) => name === mode);\n    preset = presetItem ? presetItem[1] : () => true;\n\n    helmets.forEach((helmet : any) => {\n      gauntlets.forEach((gauntlet : any) => {\n        chests.forEach((chest : any) => {\n          legs.forEach((leg : any) => {\n            const set = [helmet, gauntlet, chest, leg];\n            if (preset && preset(set)) {\n              items.push(({\n                set,\n                stats: getStatBuild(set)\n              }));\n            }\n          });\n        });\n      });\n    });\n\n    return items.sort((a : any, b : any) => b.stats.total - a.stats.total);\n  }, [helmets, gauntlets, chests, legs, mode]);\n\n  if (isLoading && inventoryData.length === 0) {\n    return (\n      <div>\n        <Spinner className={css`justify-content: flex-start;`} />\n        Loading profile data...\n      </div>\n    )\n  }\n\n  return (\n    <div style={{padding: 15}}>\n      <div style={{width: 320}}>\n        <FormGroup label=\"Optimizer Presets\">\n          <HTMLSelect\n            options={presetList.map(([name]) => name) as string[]}\n            onChange={onModeChange}\n            value={mode}\n          />\n        </FormGroup>\n        <FormGroup label=\"Class\">\n          <HTMLSelect\n            options={[\n              {label: '', value: ''},\n              {label: 'Titan', value: CLASS_TYPE_TITAN},\n              {label: 'Hunter', value: CLASS_TYPE_HUNTER},\n              {label: 'Warlock', value: CLASS_TYPE_WARLOCK}\n            ]}\n            onChange={onMainClassChange}\n            value={mainClass}\n          />\n        </FormGroup>\n        <FormGroup label=\"Exotic\">\n          <HTMLSelect\n            options={[\n              {label: '-- No Exotic --', value: ''},\n              ...exotics.map(item => ({\n                label: item.content.displayProperties.name,\n                value: item.itemHash\n              }))\n            ]}\n            onChange={onExotic}\n            value={exotic}\n          />\n        </FormGroup>\n        <hr />\n      </div>\n\n      <div>\n        Results: {combos.length.toLocaleString()} (only showing top 1,000)\n        <br />\n      </div>\n\n      {mode && combos.filter((x : any, i : number) => i < 1000).map(({set, stats}, index) => (\n        <ItemDisplay\n          key={index}\n          items={set}\n          stats={stats}\n          mode={mode}\n        />\n      ))}\n    </div>\n  );\n}\n","import React from 'react';\nimport {useGlobalState} from '../../hooks/useGlobalState';\nimport {Redirect} from 'react-router';\n\nexport function withAuth(Cmp : any) {\n  return function Auth(props : any) {\n    const {state} = useGlobalState();\n\n    // if the token is expired, run refresh token call\n    const isTokenStale = state.userAuth.accessToken ? (Date.now() >= state.userAuth.expiresIn) : true;\n\n    // // if there's no access token, redirect to auth page\n    if (isTokenStale) {\n      return <Redirect to=\"/d2io\" />\n    }\n\n    return (\n      <Cmp {...props} />\n    );\n  }\n}\n","import React from 'react';\nimport {AnchorButton} from '@blueprintjs/core';\n\nexport default function Homepage() {\n  return (\n    <div>\n      <AnchorButton href=\"https://www.bungie.net/en/OAuth/Authorize?client_id=3770&response_type=code\">\n        Sync Destiny 2 Characters\n      </AnchorButton>\n    </div>\n  );\n}\n","import React, {useEffect} from 'react';\nimport qs from 'query-string';\nimport {Redirect, RouteComponentProps, useHistory} from 'react-router';\nimport {getMembershipsForCurrentUser, getAuthToken} from '../../../api/bungieApi';\nimport setUserAuth from '../../../state/actions/userToken';\nimport {useGlobalState} from '../../../hooks/useGlobalState';\n\nexport default function OAuthCallbackPage({location} : RouteComponentProps) {\n  const {dispatch, state} = useGlobalState();\n  const history = useHistory();\n\n  useEffect(() => {\n    const query : {code ?: string} = qs.parse(location.search);\n\n    if (query.code) {\n      getAuthToken(query.code || '')\n        .then((res) => {\n          const auth = setUserAuth(\n            res.data.access_token,\n            res.data.expires_in\n          );\n\n          console.log(res, auth);\n\n          return getMembershipsForCurrentUser(auth)\n            .then((membershipRes) => {\n              if (!membershipRes.data.Response.destinyMemberships[0].membershipId) {\n                throw new Error('failed to get membership id');\n              }\n\n              return dispatch(setUserAuth(\n                res.data.access_token,\n                res.data.expires_in,\n                membershipRes.data.Response.destinyMemberships[0].membershipId,\n                membershipRes.data.Response.destinyMemberships[0].membershipType\n              ));\n            });\n        });\n    }\n  }, [dispatch, location, history]);\n\n  const isTokenStale = (Date.now() > state.userAuth.expiresIn);\n\n  if (!isTokenStale && state.userAuth.membershipId) {\n    return <Redirect to=\"/d2io/optimizer\" />;\n  }\n\n  return (\n    <div>\n      authenticating...\n    </div>\n  );\n}\n","import {useReducer} from 'react';\nimport {defaultState, TActionResponse} from '../state/globalContextState';\n\nexport function useAppReducer() {\n  return useReducer((state : any, action : TActionResponse) => {\n    const {name, ...data} = action;\n\n    state[name] = data;\n\n    return JSON.parse(JSON.stringify(state));\n  }, defaultState);\n}\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}