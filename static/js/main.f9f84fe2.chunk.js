(this["webpackJsonpdestiny-2-inventory-manager"]=this["webpackJsonpdestiny-2-inventory-manager"]||[]).push([[0],{205:function(e,t,n){e.exports=n(357)},210:function(e,t,n){},357:function(e,t,n){"use strict";n.r(t);var r=n(0),i=n.n(r),a=n(14),c=n.n(a),o=(n(210),n(23)),l=n(6),s=(n(211),n(212),n(63)),u=n(16),m=n(66);function p(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",i={name:"userAuth",accessToken:e,membershipId:n,expiresIn:Date.now()+1e3*t,membershipType:r};if(e&&window.localStorage.setItem("userAuth",JSON.stringify(i)),!e){var a=JSON.parse(window.localStorage.getItem("userAuth")||"{}");return Object(u.a)({},i,{},a)}return i}function d(e){return Object(u.a)({name:"profile"},e)}function f(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{contentPath:"",version:""};return Object(u.a)({name:"manifest"},e)}function v(e){return Object(u.a)({name:"componentContent"},e)}var h=[p,d,f,v].reduce((function(e,t){var n=t(),r=n.name,i=Object(m.a)(n,["name"]);if(!r)throw new Error("action must return a `type` value");return Object(u.a)({},e,Object(s.a)({},r,i))}),{}),b=Object(r.createContext)(h),y=n(7),g=n(148),E=n(13);var O=n(64),j=n.n(O),w=n(31),S=n.n(w),P="f5a851a085ec464e8c1af199031b6aec",x="https://www.bungie.net/platform";"https://www.bungie.net/en/OAuth/Authorize?client_id=".concat("3770","&response_type=code");function k(e){return e?((!e.accessToken||Date.now()>e.expiresIn)&&(window.location.href="/d2io"),{"x-api-key":P,Authorization:"Bearer ".concat(e.accessToken)}):{"x-api-key":P}}function I(){return Object(r.useContext)(b)}var C=n(143),A=n.n(C),M=n(39),T=n.n(M),D=[["204137529","mobility",-5],["3682186345","resilience",-5],["555005975","recovery",-5],["2623485440","discipline",-5],["1227870362","intellect",-5],["3699676109","strength",-5],["3961599962","mobility",-10],["275671171","mobility",-10],["2645858828","recovery",-10],["126924337","recovery",-10],["3790655795","resilience",-10],["2850583378","resilience",-10],["3253038666","strength",-10],["3355995799","intellect",-10],["4048838440","discipline",-10],["2979815167","strength",-20],["1484685887","mobility",-20],["3523075123","recovery",10],["2263321584","discipline",10],["3523075120","strength",10],["3523075121","intellect",10],["2263321585","intellect",10]];function H(e,t){return e.itemHash&&t.exotic?t.itemHash===e.itemHash:!(e.itemHash&&!t.exotic&&e.content.itemTypeDisplayName===t.content.itemTypeDisplayName)&&!(!e.hash&&t.exotic)}function R(e,t){var n=e.profileInventory.data.items,r=Object.keys(e.characterEquipment.data).map((function(t){return e.characterEquipment.data[t].items})).reduce((function(e,t){return[].concat(Object(o.a)(e),Object(o.a)(t))}),[]),i=Object.keys(e.characterInventories.data).map((function(t){return e.characterInventories.data[t].items})).reduce((function(e,t){return[].concat(Object(o.a)(e),Object(o.a)(t))}),[]),a=e.itemComponents.stats.data,c=e.itemComponents.instances.data,s=e.itemComponents.sockets.data;return[].concat(Object(o.a)(n),Object(o.a)(i),Object(o.a)(r)).filter((function(e){return e.itemInstanceId&&t[e.itemHash].equippingBlock&&t[e.itemHash].quality&&a[e.itemInstanceId]&&a[e.itemInstanceId].stats&&a[e.itemInstanceId].stats[144602215]})).map((function(e){return Object(u.a)({},e,{content:t[e.itemHash],exotic:"exotic_armor"===t[e.itemHash].equippingBlock.uniqueLabel,classType:t[e.itemHash].classType,powerCap:t.powercaps[t[e.itemHash].quality.versions[0].powerCapHash].powerCap,intellect:a[e.itemInstanceId].stats[144602215].value,mobility:a[e.itemInstanceId].stats[2996146975].value,strength:a[e.itemInstanceId].stats[4244567218].value,discipline:a[e.itemInstanceId].stats[1735777505].value,recovery:a[e.itemInstanceId].stats[1943323491].value,resilience:a[e.itemInstanceId].stats[392767087].value})})).map((function(e){return function(e,t,n){var r=t[e.itemInstanceId];if(!r||0===r.sockets.length)return e;D.forEach((function(t){var n=Object(l.a)(t,3),i=n[0],a=n[1],c=n[2];(function(e,t){return t.some((function(t){return t.isEnabled&&t.plugHash.toString()===e.toString()}))})(i,r.sockets)&&(e[a]+=c)}));var i=n[e.itemInstanceId];return i&&i.energy&&10===i.energy.energyCapacity&&["mobility","recovery","resilience","strength","intellect","discipline"].forEach((function(t){e[t]-=2})),e}(e,s,c)}))}function W(e){var t=e,n=t.reduce((function(e,t){return e+t.mobility}),0),r=t.reduce((function(e,t){return e+t.resilience}),0),i=t.reduce((function(e,t){return e+t.recovery}),0),a=t.reduce((function(e,t){return e+t.discipline}),0),c=t.reduce((function(e,t){return e+t.intellect}),0),o=t.reduce((function(e,t){return e+t.strength}),0);return{mobility:n,resilience:r,recovery:i,discipline:a,intellect:c,strength:o,total:n+r+i+a+c+o}}function B(e){return e%10>=5&&e%10<=7||e%10<=3}var L=[["No Optimization",function(){return!0}],["PvP - Standard",function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:220,n=W(e),r=n.mobility,i=n.recovery,a=n.discipline,c=n.intellect,o=n.strength,l=n.total;return r<=59&&i>=60&&r%10<=4&&[i%10<=4,c%10<=4,a%10<=4,o%10<=4].filter((function(e){return e})).length>=4&&l>=t}],["PvP - Standard (Low Resilience)",function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:220,n=W(e),r=n.mobility,i=n.recovery,a=n.discipline,c=n.intellect,o=n.strength,l=n.total,s=n.resilience;return r<=59&&i>=60&&r%10<=4&&[i%10<=2,c%10<=2,a%10<=2,o%10<=2].filter((function(e){return e})).length>=3&&s<=24&&l>=t}],["PvP - Perfect",function(e){var t=W(e),n=t.mobility,r=t.recovery,i=t.discipline,a=t.intellect,c=t.strength,o=t.resilience;return r>=60&&o<=26&&[B(n),o%10<=4,B(r),B(a),B(i),B(c)].filter((function(e){return e})).length>=5}],["PvE - Standard",function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:220,n=W(e),r=n.mobility,i=n.recovery,a=n.discipline,c=n.intellect,o=n.strength,l=n.total;return i>=60&&a>=50&&[r%10<=4,i%10<=4,c%10<=4,a%10<=4,o%10<=4].filter((function(e){return e})).length>=5&&l>=t}],["PvE - Perfect",function(e){var t=W(e),n=t.mobility,r=t.recovery,i=t.discipline,a=t.intellect,c=t.strength,o=t.resilience;return r>=60&&i>=50&&[n%10<=2,r%10<=2,a%10<=2,i%10<=2,c%10<=2,o%10<=2].filter((function(e){return e})).length>=6}],["PvP - Top Stats (Low Resilience)",function(e){var t=W(e),n=t.resilience;return n<20}],["PvP - Low Gear (Low Resilience)",function(e){var t=W(e),n=t.mobility,r=t.recovery,i=t.discipline,a=t.intellect,c=t.strength,o=t.resilience;return n<=59&&n%10<=4&&o<=30&&[r%10<=4,a%10<=4,i%10<=4,c%10<=4].filter((function(e){return e})).length>=4}],["PvP - Top Stats (Super Low Resilience)",function(e){var t=W(e),n=(t.resilience,t.mobility),r=t.recovery;return n+r>=125}],["PvP - Minimum Gear",function(e){var t=W(e),n=t.mobility,r=t.recovery;return n>=30&&r>=40}],["PvP - Perfect (Low Resilience)",function(e){var t=W(e),n=t.mobility,r=t.recovery,i=t.discipline,a=t.intellect,c=t.strength,o=t.resilience;return r>=80&&n>=40&&o>=10&&o<=16&&[B(n),B(r),B(i),B(c),a%10<=4].filter((function(e){return e})).length>=5}],["PvP - Unchi Hunter",function(e){var t=W(e),n=t.mobility,r=t.recovery,i=(t.discipline,t.intellect,t.strength,t.resilience);return n<=59&&n+r>=109&&n%10<=4&&i>=10&&i<=12&&r%10<=4}],["PvP - Unchi Warlock",function(e){var t=W(e),n=t.mobility,r=t.recovery,i=(t.discipline,t.intellect),a=(t.strength,t.resilience);return n<=19&&n+r>=69&&n%10<=4&&a>=10&&a<=22&&r%10<=4&&i%10<=4&&i>=60}],["PvP - Unchi Titan 6",function(e){var t=W(e),n=(t.mobility,t.recovery),r=(t.discipline,t.intellect,t.strength,t.resilience);return r+n>=100}],["PvP - Warlock Trash Gear",function(e){var t=W(e),n=t.mobility,r=t.recovery;return n<=39&&n%10<=4&&r>=50}],["PvP - Warlock Minimum Gear",function(e){var t=W(e),n=t.mobility,r=t.recovery,i=t.discipline,a=t.strength,c=t.resilience;return n<=39&&n%10<=4&&r>=50&&c<=24&&[r%10<=4,i%10<=4,a%10<=4].filter((function(e){return e})).length>=2}],["PvE - Hunter - Minimum - Ability Spam",function(e){var t=W(e),n=t.mobility,r=t.recovery,i=t.resilience;return n>=50&&r>=50&&i<=30}],["PvE - Hunter - Average - Ability Spam",function(e){var t=W(e),n=t.mobility,r=t.recovery,i=t.resilience,a=t.discipline,c=t.intellect;return n>=50&&r>=50&&i<=30&&[n%10<=4,r%10<=4,c%10<=4,i%10<=4,a%10<=4].filter((function(e){return e})).length>=3}],["PvE - Hunter - Above Average - Ability Spam",function(e){var t=W(e),n=t.mobility,r=t.recovery,i=t.resilience,a=t.intellect;return n>=50&&r>=50&&i<=30&&[B(n),B(r),B(a),B(i)].filter((function(e){return e})).length>=4}],["PvE - Warlock - Minimum - Ability Spam",function(e){var t=W(e),n=t.mobility,r=t.recovery,i=t.resilience;return n<=30&&r>=50&&i<=30}],["PvE - Warlock - Average - Ability Spam",function(e){var t=W(e),n=t.mobility,r=t.recovery,i=t.resilience,a=t.discipline,c=t.intellect;return n<=30&&r>=50&&i<=30&&[n%10<=4,r%10<=4,c%10<=4,i%10<=4,a%10<=4].filter((function(e){return e})).length>=3}],["PvE - Warlock - Above Average - Ability Spam",function(e){var t=W(e),n=t.mobility,r=t.recovery,i=t.resilience,a=t.discipline,c=t.intellect;return n<=30&&r>=50&&i<=30&&[n%10<=4,r%10<=4,c%10<=4,i%10<=4,a%10<=4].filter((function(e){return e})).length>=5}],["PvE - Titan - Minimum - Ability Spam",function(e){var t=W(e),n=t.mobility,r=t.recovery,i=t.resilience,a=t.discipline,c=t.intellect;return n<=30&&r>=50&&i>=50&&[n%10<=4,r%10<=4,c%10<=4,i%10<=4,a%10<=4].filter((function(e){return e})).length>=3}],["PvE - Titan - Average - Ability Spam",function(e){var t=W(e),n=t.mobility,r=t.recovery,i=t.resilience,a=t.discipline,c=t.intellect;return n<=30&&r>=50&&i>=50&&[n%10<=4,r%10<=4,c%10<=4,i%10<=4,a%10<=4].filter((function(e){return e})).length>=3}],["PvE - Titan - Above Average - Ability Spam",function(e){var t=W(e),n=t.mobility,r=t.recovery,i=t.resilience,a=t.discipline,c=t.intellect;return n<=30&&r>=50&&i>=50&&[n%10<=4,r%10<=4,c%10<=4,i%10<=4,a%10<=4].filter((function(e){return e})).length>=5}]],N=n(144),z=n(151);function G(){var e=Object(N.a)(["\n        font-family: monospace;\n        color: #fff;\n        background: #000;\n        width: 500px;\n        padding: 10px 10px 10px 0;\n        overflow-x: auto;\n        width: 100%;\n        \n        @media (max-width: 500px) {\n          font-size: 14px;\n        }\n      "]);return G=function(){return e},e}var _="---------------------------------------------------".length;function F(e){var t=e.items,n=e.stats,r=e.mode,a=n.mobility,c=n.recovery,o=n.discipline,s=n.intellect,u=n.strength,m=n.resilience,p=n.total,d=r.indexOf("PvP")>=0,f=[["Mobility",a,d?30:10],["Resilience",m,10],["Recovery",c,10],["Discipline",o,10],["Intellect",s,10],["Strength",u,d?30:10]];return i.a.createElement("pre",{className:Object(z.a)(G())},"| ".concat("Stat Total".padEnd(13,".")).concat(p," (max: 280)").padEnd(_-1)+"|",i.a.createElement("br",null),f.map((function(e){var t=Object(l.a)(e,3),n=t[0],r=t[1],a=t[2];return i.a.createElement("div",{key:n},"| ".concat(n.padEnd(13,".")).concat(r," (").concat(r+a,")").padEnd(_-1)+"|")})),"| ".padEnd(_-1)+"|",i.a.createElement("br",null),t.map((function(e,t){var n=[["Mobility",e.mobility],["Resilience",e.resilience],["Recovery",e.recovery],["Discipline",e.discipline],["Intellect",e.intellect],["Strength",e.strength]],r=n.reduce((function(e,t){return e+t[1]}),0),a=n.map((function(e){var t=Object(l.a)(e,2),n=t[0],r=t[1];return"".concat(n.substr(0,3)," ").concat(r)})).join("  ");return i.a.createElement("div",{key:t},"| [".concat(e.content.itemTypeDisplayName,"] ").concat(e.content.displayProperties.name," (").concat(r,")").padEnd(_-1)+"|",i.a.createElement("br",null),"| ".concat(a).padEnd(_-1)+"|")})))}var J=n(146),q=n(147),U=n(149),K=n(152),X=function(e){Object(K.a)(n,e);var t=Object(U.a)(n);function n(){var e;Object(J.a)(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).state={hasError:!1,error:new Error("")},e}return Object(q.a)(n,[{key:"componentDidCatch",value:function(e,t){console.debug("caught error within ErrorBoundary"),console.error(e,t),this.setState({error:e})}},{key:"render",value:function(){return this.state.hasError?i.a.createElement("div",null,this.props.defaultErrorMessage||"An error has occurred on this page.",i.a.createElement("pre",{style:{whiteSpace:"pre-wrap",wordWrap:"break-word"}},this.state.error.message,"\n",this.state.error.stack)):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{hasError:!0}}}]),n}(r.Component),Y=[["/d2io/optimizer",function(){var e=I(),t=e.state,n=e.dispatch,a=Object(r.useState)(!0),c=Object(l.a)(a,2),s=c[0],m=c[1],p=Object(r.useState)("PvP"),h=Object(l.a)(p,2),b=h[0],y=h[1],g=Object(r.useState)(""),O=Object(l.a)(g,2),j=O[0],w=O[1],P=Object(r.useState)(""),C=Object(l.a)(P,2),M=C[0],D=C[1],B=Object(r.useState)(50),N=Object(l.a)(B,2),z=N[0],G=N[1],_=Object(r.useState)(10),J=Object(l.a)(_,2),q=J[0],U=J[1],K=Object(r.useState)(60),X=Object(l.a)(K,2),Y=X[0],Q=X[1],Z=Object(r.useState)(1),$=Object(l.a)(Z,2),V=$[0],ee=$[1],te=Object(r.useState)(1),ne=Object(l.a)(te,2),re=ne[0],ie=ne[1],ae=Object(r.useState)(1),ce=Object(l.a)(ae,2),oe=ce[0],le=ce[1],se=Object(r.useState)(z),ue=Object(l.a)(se,2),me=ue[0],pe=ue[1],de=Object(r.useState)(q),fe=Object(l.a)(de,2),ve=fe[0],he=fe[1],be=Object(r.useState)(Y),ye=Object(l.a)(be,2),ge=ye[0],Ee=ye[1],Oe=Object(r.useState)(V),je=Object(l.a)(Oe,2),we=je[0],Se=je[1],Pe=Object(r.useState)(re),xe=Object(l.a)(Pe,2),ke=xe[0],Ie=xe[1],Ce=Object(r.useState)(oe),Ae=Object(l.a)(Ce,2),Me=Ae[0],Te=Ae[1],De=Object(r.useMemo)((function(){return T()(pe,900)}),[]),He=Object(r.useMemo)((function(){return T()(he,900)}),[]),Re=Object(r.useMemo)((function(){return T()(Ee,900)}),[]),We=Object(r.useMemo)((function(){return T()(Te,900)}),[]),Be=Object(r.useMemo)((function(){return T()(Ie,900)}),[]),Le=Object(r.useMemo)((function(){return T()(Se,900)}),[]),Ne=function(e){e&&e.addEventListener("touchmove",(function(e){e.preventDefault()}),{passive:!1})};Object(r.useEffect)((function(){var e;t.manifest.version?m(!1):Promise.all([(e=t.userAuth,S()({url:"https://www.bungie.net/Platform/Destiny2/".concat(e.membershipType,"/Profile/").concat(e.membershipId,"/"),params:{components:"100,102,103,200,201,202,205,300,301,304,305,306,307,800,308,310,309,900,1100"},headers:k(e)})),S()({url:"".concat(x,"/Destiny2/Manifest/"),headers:k()})]).then((function(e){var t=Object(l.a)(e,2),r=t[0],i=t[1];return n(f({contentPath:i.data.Response.jsonWorldComponentContentPaths.en.DestinyRecordDefinition,version:i.data.Response.version})),n(d({data:r.data.Response})),Promise.all([S()({url:"https://www.bungie.net".concat(i.data.Response.jsonWorldComponentContentPaths.en.DestinyInventoryItemLiteDefinition)}),S()({url:"https://www.bungie.net".concat(i.data.Response.jsonWorldComponentContentPaths.en.DestinyPowerCapDefinition)})])})).then((function(e){var t=Object(l.a)(e,2),r=t[0],i=t[1];n(v(Object(u.a)({},r.data,{powercaps:i.data}))),m(!1)}))}),[t.userAuth,t.manifest,m]);var ze=Object(r.useCallback)((function(e){return y(e.target.value)}),[]),Ge=Object(r.useCallback)((function(e){w(e.target.value),D("")}),[]),_e=Object(r.useCallback)((function(e){return D(e.target.value)}),[]),Fe=Object(r.useMemo)((function(){return t.profile.data&&t.profile.data.profileInventory&&0!==Object.keys(t.componentContent).length?R(t.profile.data,t.componentContent):[]}),[t.profile,t.componentContent]),Je=Object(r.useMemo)((function(){return function(e){var t=e.powerCap,n=e.exoticItem,r=e.items,i=e.mainClass,a=[],c=[],o=[],l=[];return 0===r.length||""===i||r.filter((function(e){return e.powerCap>=t})).filter((function(e){return e.classType.toString()===i.toString()})).forEach((function(e){switch(e.content.itemTypeDisplayName){case"Helmet":H(n,e)&&a.push(e);break;case"Gauntlets":H(n,e)&&c.push(e);break;case"Chest Armor":H(n,e)&&o.push(e);break;case"Leg Armor":H(n,e)&&l.push(e)}})),{helmets:a,gauntlets:c,chests:o,legs:l}}({powerCap:1260,exoticItem:Fe.filter((function(e){return e.itemHash.toString()===M.toString()}))[0]||{},items:Fe,mainClass:j})}),[Fe,j,M]),qe=A()(Fe.filter((function(e){return e.exotic&&e.classType.toString()===j.toString()})),(function(e){return e.itemHash})),Ue=Je.helmets,Ke=Je.gauntlets,Xe=Je.chests,Ye=Je.legs,Qe=Object(r.useCallback)((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:220,n=W(e),r=n.mobility,i=n.recovery,a=n.discipline,c=n.intellect,o=n.strength,l=n.total,s=n.resilience;return r>=me&&s>=ve&&i>=ge&&c>=ke&&o>=Me&&a>=we&&l>=t}),[me,ve,ge,we,ke,Me]),Ze=Object(r.useMemo)((function(){var e=[],t=L.find((function(e){return Object(l.a)(e,1)[0]===b}));return t?t[1]:function(){return!0},Ue.forEach((function(t){Ke.forEach((function(n){Xe.forEach((function(r){Ye.forEach((function(i){var a=[t,n,r,i];Qe(a)&&e.push({set:a,stats:W(a)})}))}))}))})),e.sort((function(e,t){return t.stats.total-e.stats.total}))}),[Ue,Ke,Xe,Ye,b,Qe]);if(s&&0===Fe.length)return i.a.createElement("div",{style:{display:"flex",padding:15,justifyContent:"center"}},i.a.createElement("div",{style:{maxWidth:500,width:"100%",textAlign:"center"}},i.a.createElement(E.Spinner,{tagName:"span"}),i.a.createElement("br",null),"Loading profile data..."));var $e=z+q+Y+V+re+oe,Ve=$e/280;return i.a.createElement("div",{style:{padding:15}},i.a.createElement("div",{style:{maxWidth:700}},i.a.createElement("div",{style:{display:"flex",gap:"10px",flexWrap:"wrap"}},i.a.createElement("div",null,i.a.createElement(E.FormGroup,{label:"Class"},i.a.createElement(E.HTMLSelect,{options:[{label:"",value:""},{label:"Titan",value:0},{label:"Hunter",value:1},{label:"Warlock",value:2}],onChange:Ge,value:j}))),i.a.createElement("div",null,i.a.createElement(E.FormGroup,{label:"Type"},i.a.createElement(E.HTMLSelect,{options:["PvP","PvE"],value:b,onChange:ze}))),i.a.createElement("div",{style:{display:""===j?"none":"block"}},i.a.createElement(E.FormGroup,{label:"Exotic"},i.a.createElement(E.HTMLSelect,{options:[{label:"-- No Exotic --",value:""}].concat(Object(o.a)(qe.map((function(e){return{label:e.content.displayProperties.name,value:e.itemHash}})))),onChange:_e,value:M})))),i.a.createElement("div",{style:{margin:"15px 0",display:""===j?"none":"block"}},i.a.createElement(E.FormGroup,{label:i.a.createElement("div",null,"Perfection Meter",i.a.createElement("strong",null,Ve<=1?" (".concat(Math.round($e/280*100),"%)"):"\ud83d\udea8 Too Much!")," ",Ze.length>0&&i.a.createElement(i.a.Fragment,null,Ve>=.91&&Ve<=1&&i.a.createElement("div",null,i.a.createElement("strong",null,"High stat territory."))),0===Ze.length&&Ve<=1&&i.a.createElement(i.a.Fragment,null," \ud83d\ude25 no results, get better gear"))},i.a.createElement(E.ProgressBar,{value:Ve,intent:function(){if(0!==Ze.length)return Ve<=.3?"primary":Ve<=.55?"success":Ve<=1?"warning":Ve>1?"danger":void 0}(),animate:!1,stripes:!1}))),i.a.createElement("div",{style:{flexWrap:"wrap",gap:"20px",display:""===j?"none":"flex"}},[["Base Min Mobility",z,function(e){De(e),G(e)}],["Base Min Resilience",q,function(e){He(e),U(e)}],["Base Min Recovery",Y,function(e){Re(e),Q(e)}],["Base Min Discipline",V,function(e){Le(e),ee(e)}],["Base Min Intelligence",re,function(e){Be(e),ie(e)}],["Base Min Strength",oe,function(e){We(e),le(e)}]].map((function(e){var t=Object(l.a)(e,3),n=t[0],r=t[1],a=t[2];return i.a.createElement("div",{style:{flex:"0 0 45%",padding:"5px"},key:n},i.a.createElement(E.FormGroup,{label:n},i.a.createElement("div",{ref:Ne},i.a.createElement(E.Slider,{min:0,max:100,stepSize:1,labelStepSize:25,onChange:a,value:r}))))}))),i.a.createElement(E.Divider,{style:{borderColor:"#333",margin:"20px 0"}})),i.a.createElement("div",{style:{display:""===j?"none":"block"}},"Results: ",Ze.length.toLocaleString()," (only showing top 250)",i.a.createElement("br",null)),i.a.createElement("div",{style:{transform:"translateZ(0)",display:""===j?"none":"block"}},b&&Ze.filter((function(e,t){return t<250})).map((function(e,t){var n=e.set,r=e.stats;return i.a.createElement(F,{key:t,items:n,stats:r,mode:b})}))))}]].map((function(e){var t,n=Object(l.a)(e,2),r=n[0],a=n[1];return[r,(t=a,function(e){var n=I().state;return!n.userAuth.accessToken||Date.now()>=n.userAuth.expiresIn?i.a.createElement(y.a,{to:"/d2io"}):i.a.createElement(t,e)})]})),Q=[["/d2io",function(){return i.a.createElement("div",{style:{display:"flex",padding:15,justifyContent:"center"}},i.a.createElement("div",{style:{maxWidth:500,width:"100%"}},i.a.createElement("div",{style:{textAlign:"center"}},i.a.createElement("h1",null,"Destiny 2 Item Optimizer"),i.a.createElement("p",null,"Find the best armor combination throughout your collection."),i.a.createElement("br",null),i.a.createElement(E.AnchorButton,{intent:"primary",href:"https://www.bungie.net/en/OAuth/Authorize?client_id=3770&response_type=code",large:!0},"Sync Destiny 2 Characters"),i.a.createElement(E.Divider,{style:{borderColor:"#333",margin:"25px 0"}}),"Created by [XBOX] Mastuh Matt, AKA: Throwing Knife God.",i.a.createElement("br",null),i.a.createElement("br",null)),i.a.createElement("div",{style:{paddingBottom:"".concat(Math.round(56.25),"%"),position:"relative"}},i.a.createElement("iframe",{style:{position:"absolute",width:"100%",height:"100%",top:"0",left:0},src:"https://www.youtube.com/embed/ztwefM1QItY",title:"YouTube video player",frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0}))))}],["/d2io/auth",function(e){var t=e.location,n=I(),a=n.dispatch,c=n.state,o=Object(y.g)();return Object(r.useEffect)((function(){var e=j.a.parse(t.search);e.code&&function(e){return S()({method:"POST",headers:Object(u.a)({},k(),{"content-type":"application/x-www-form-urlencoded"}),data:j.a.stringify({code:e,grant_type:"authorization_code",client_id:"3770"}),url:(t="/app/oauth/token/",x+t)});var t}(e.code||"").then((function(e){var t,n=p(e.data.access_token,e.data.expires_in);return console.log(e,n),(t=n,S()({url:"".concat(x,"/User/GetMembershipsForCurrentUser/"),headers:k(t)})).then((function(t){if(!t.data.Response.destinyMemberships[0].membershipId)throw new Error("failed to get membership id");return a(p(e.data.access_token,e.data.expires_in,t.data.Response.destinyMemberships[0].membershipId,t.data.Response.destinyMemberships[0].membershipType))}))}))}),[a,t,o]),!(Date.now()>c.userAuth.expiresIn)&&c.userAuth.membershipId?i.a.createElement(y.a,{to:"/d2io/optimizer"}):i.a.createElement("div",{style:{display:"flex",padding:15,justifyContent:"center"}},i.a.createElement("div",{style:{maxWidth:500,width:"100%",textAlign:"center"}},i.a.createElement(E.Spinner,null),i.a.createElement("br",null),"Authenticating and downloading inventory..."))}]].concat(Object(o.a)(Y)).map((function(e){var t=Object(l.a)(e,2),n=t[0],r=t[1];return i.a.createElement(y.b,{key:n,component:r,path:n,exact:!0})}));var Z=function(){var e=Object(r.useReducer)((function(e,t){var n=t.name,r=Object(m.a)(t,["name"]);return e[n]=r,JSON.parse(JSON.stringify(e))}),h),t=Object(l.a)(e,2),n=t[0],a=t[1];return i.a.createElement(b.Provider,{value:{state:JSON.parse(JSON.stringify(n)),dispatch:a}},i.a.createElement(X,null,i.a.createElement(g.a,null,i.a.createElement(y.d,null,Q))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(i.a.createElement(i.a.StrictMode,null,i.a.createElement(Z,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[205,1,2]]]);
//# sourceMappingURL=main.f9f84fe2.chunk.js.map